"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}(function(root,factory){if(typeof define==="function"&&define.amd){define(["wheel-indicator"],factory)}else if((typeof exports==="undefined"?"undefined":_typeof(exports))==="object"){module.exports=factory(require("wheel-indicator"))}else{root.sectionScroll=factory(root.WheelIndicator)}})(typeof self!=="undefined"?self:void 0,function(WheelIndicator){'use strict';var sectionScroll={};var defaults={scrollableSection:document.querySelector(".scrolling-sections"),transitionDuration:"1s",transitionTimingFunction:"ease"};var state={articles:null,container:null,index:0,touchEndY:0,touchStartY:0,wheelHandler:null};var settings;var extendDefaults=function extendDefaults(defaults,options){var property;for(property in options){if(Object.prototype.hasOwnProperty.call(options,property)){defaults[property]=options[property]}}return defaults};var sectionInViewport=function sectionInViewport(){var sectionBounds=settings.scrollableSection.getBoundingClientRect();return sectionBounds.top===0};var getArticles=function getArticles(){if(!settings.scrollableSection)return;var articles=settings.scrollableSection.querySelectorAll("article");if(!articles)return;state.articles=articles};var setupSection=function setupSection(){settings.scrollableSection.classList.add("js-scrolling-sections");state.container=settings.scrollableSection.querySelector("div");if(!sectionInViewport()){state.index=state.articles.length-2;state.wheelHandler.turnOff();scrollSection("down")}state.container.style.transitionTimingFunction=settings.transitionTimingFunction;state.container.style.transitionDuration=settings.transitionDuration};var scrollSection=function scrollSection(direction){var event=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(!["up","down"].includes(direction))return;if("up"===direction&&state.index===0)return;if("down"===direction&&state.index+1===state.articles.length){if(!settings.scrollableSection.nextElementSibling)return;state.wheelHandler.turnOff();return}if(event){event.preventDefault();event.stopPropagation()}var index="down"===direction?state.index+1:state.index-1;state.container.style.transform="translate3d(0px, -".concat(index*window.innerHeight,"px, 0px)");state.index=index};var scrollHandler=function scrollHandler(){if(!sectionInViewport())return;state.wheelHandler.turnOn()};var setVhUnit=function setVhUnit(){var vh=window.innerHeight*0.01;document.documentElement.style.setProperty("--vh","".concat(vh,"px"))};var keyDownHandler=function keyDownHandler(event){var keys=["ArrowDown","ArrowUp","Space"];if(!keys.includes(event.code)||!sectionInViewport())return;var direction="ArrowUp"===event.code||event.shiftKey&&"Space"===event.code?"up":"down";scrollSection(direction,event)};var touchHandler=function touchHandler(event){if(!sectionInViewport())return;if("touchstart"===event.type){state.touchStartY=event.changedTouches[0].screenY;return}state.touchEndY=event.changedTouches[0].screenY;var direction=state.touchEndY>state.touchStartY?"up":"down";scrollSection(direction,event)};sectionScroll.destroy=function(){if(!settings)return;state.wheelHandler.destroy();window.removeEventListener("scroll",scrollHandler,true);window.removeEventListener("resize",setVhUnit,true);window.removeEventListener("keydown",keyDownHandler,true);settings.scrollableSection.removeEventListener("touchstart",touchHandler,true);settings.scrollableSection.removeEventListener("touchend",touchHandler,true);settings.scrollableSection.removeEventListener("touchmove",touchHandler,true);settings=null;state.articles=null;state.index=0};sectionScroll.init=function(options){sectionScroll.destroy();settings=extendDefaults(defaults,options||{});setVhUnit();getArticles();if(!state.articles)return;state.wheelHandler=new WheelIndicator({elem:settings.scrollableSection,callback:function callback(event){return scrollSection(event.direction,event)}});setupSection();window.addEventListener("scroll",scrollHandler,true);window.addEventListener("resize",setVhUnit,true);window.addEventListener("keydown",keyDownHandler,true);settings.scrollableSection.addEventListener("touchstart",touchHandler,true);settings.scrollableSection.addEventListener("touchend",touchHandler,true);settings.scrollableSection.addEventListener("touchmove",touchHandler,true)};return sectionScroll});